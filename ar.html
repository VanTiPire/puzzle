<html>

<head>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script
        src="https://rawgit.com/nicolocarpignoli/nicolocarpignoli.github.io/master/ar-click-events/events.js"></script>
    <script>


        AFRAME.registerComponent('markerhandler', {

            init: function () {
                const animatedMarker = document.querySelector("#animated-marker");
                const aEntity = document.querySelector(".clickable");

                // every click, we make our model grow in size :)
                animatedMarker.addEventListener('click', function (ev, target) {
                    const intersectedElement = ev && ev.detail && ev.detail.intersectedEl;
                    if (aEntity && intersectedElement === aEntity) {
                        const scale = aEntity.getAttribute('scale');
                        Object.keys(scale).forEach((key) => scale[key] = scale[key] + 1);
                        aEntity.setAttribute('scale', scale);
                    }
                });
            }
        });
    </script>
</head>

<body style="margin : 0px; overflow: hidden;">
    <div style='top: 10px;text-align: center; z-index: 1; color: grey'>
        Try pinching, panning, and swiping (left/right)<br>
        Works with a hiro marker.
    </div>
    <a-scene renderer="logarithmicDepthBuffer: true; colorManagement: true" embedded arjs>
        <!-- Adding a cursor for detecting clicks -->


        <a-marker markerhandler emitevents="true" cursor="rayOrigin: mouse" id="animated-marker" type='barcode'
            value='6' preset="hiro" controller>
            <!-- 2x2 Grid of Planes with class 'clickable' for cursor interaction -->
            <a-plane plane-grid class="clickable" position="-0.5 0.5 0" rotation="-90 0 0" width="0.5" height="0.5"
                color="red"></a-plane>
            <a-plane plane-grid class="clickable" position="0.5 0.5 0" rotation="-90 0 0" width="0.5" height="0.5"
                color="blue"></a-plane>
            <a-plane plane-grid class="clickable" position="-0.5 0.5 1" rotation="-90 0 0" width="0.5" height="0.5"
                color="green"></a-plane>
            <a-plane plane-grid class="clickable" position="0.5 0.5 1" rotation="-90 0 0" width="0.5" height="0.5"
                color="yellow"></a-plane>

            <!-- Image elements displayed in AR -->
            <a-image id="image1" src="images/image1.jpg" position="0 1 0" scale="2 2 2" visible="false"
                image-display></a-image>
            <a-image id="image2" src="images/image1.jpg" position="0 1 0" scale="2 2 2" visible="false"
                image-display></a-image>
            <a-image id="image3" src="images/image1.jpg" position="0 1 0" scale="2 2 2" visible="false"
                image-display></a-image>
            <a-image id="image4" src="images/image1.jpg" position="0 1 0" scale="2 2 2" visible="false"
                image-display></a-image>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>
</body>

</html>